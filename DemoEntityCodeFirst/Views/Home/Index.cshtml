
@{
    ViewBag.Title = "Index";
}
<h2 id="date-container"></h2>
<ul id="chart-container" style="width: 100%; height: 150px; list-style-type: none;"></ul>

<select id="select-container"></select>
<label>Experence:</label><input id="input-year" type="number" min="0" max="100" />
<button id="send">Change</button>

@section scripts {
    <!--Script references. -->
    <!--The jQuery library is required and is referenced by default in _Layout.cshtml. -->
    <!--Reference the SignalR library. -->
    <script src="~/scripts/jquery.signalR-2.2.0.min.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="~/signalr/hubs"></script>
    <!--SignalR script to update the chat page and send messages.-->
    <script>
        $(document).ready(function () {
            var manage = $.connection.chatHub;
            $(function () {
                // Reference the auto-generated proxy for the hub.
                //Display time server
                manage.client.loadDate = function (currentDate) {
                    $("#date-container").empty();
                    $("#date-container").text(currentDate);
                }
                // Create a function that the hub can call back to display messages.
                manage.client.loadInfo = function (listPerson) {
                    $('#chart-container').empty();
                    $('#select-container').empty();
                    listPerson.forEach(function (item) {
                        $('#chart-container').append('<li style="position: relative; padding-left: 100px;"><span style="position: absolute; left: 0;">' + item.Name + '</span>' + '<span  style="display: inline-block; height: 20px; background-color: #36A1E0; width:'+(item.Experencde)*10 +'px;"' +'></span></li>');
                        console.log(item);
                        $('#select-container').append('<option value=' + item.ID + '>' + item.Name + '</option>');
                    });
                }
                    // Add the message to the page.
                // Start the connection.
                $.connection.hub.start().done(function () {
                    setInterval(setDefault());
                    setInterval(loadDateTimeServer());
                    $('#send').click(function () {
                        manage.server.upDateInfo($('#select-container').val(), $('#input-year').val());
                        // Clear text box and reset focus for next comment.
                        $('#input-year').val('').focus();
                    });
                });
            });
            function loadDateTimeServer() {
                manage.server.nowDate();
            }
            function setDefault() {
                manage.server.loadInfoDefault();
            }
        });
    </script>
}

